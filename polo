#! /usr/bin/env python3


from PoloMallet import PoloConfig as pconfig
from PoloMallet import PoloMallet as mallet
import sys

if __name__ == '__main__':
    
    print("Welcome to Polo")

    print("Import config")
    mc = pconfig()
    mc.read_ini('config.ini')
    trials = mc.get_trial_names()

    print("Pick a trial")
    print(trials)

    mc.import_ini(trials[0])

    print("Initializing")
    m = mallet(mc)

    print('Importing corpus')
    m.mallet_import()

    print('Training model')
    m.mallet_train()

    print("Putting data into database")
    m.tables_to_db()

    print("Adding diagnostics tables")
    m.add_diagnostics()

    print("Adding doc table with topic entropy")
    m.add_topic_entropy()

    print("Adding topicpair table")
    m.create_table_topicpair()

    print("Cleaning up")
    m.del_mallet_files()

    print("Done with", m.config.trial_name)
